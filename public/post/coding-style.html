<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimal-ui">
    <link rel="shortcut icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../css/code.css" type="text/css"/>
    <link rel="stylesheet" href="../css/bootstrap.css" type="text/css"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css"/>
    <title>编程小梦|如何编写易读的代码</title>
</head>
<body>
<nav class="navbar navbar-default navbar-static-top" style="opacity: .9" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">编程小梦</a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li class="active"><a href="/">Blog</a></li>
                
                <li><a href="https://github.com/kangkaisen" target="_blank" rel="nofollow">GitHub</a></li>
                
                
                <li><a href="http://weibo.com/533234148" target="_blank" rel="nofollow">WeiBo</a></li>
                
            </ul>
        </div>
    </div>
</nav>
<div class="row" style="padding-top: 60px">
    <div class="container center-block">
        <div class="col-md-1"></div>
        <div class="col-md-10 col-sm-12">
            <h1> 如何编写易读的代码</h1>
            <hr/>
            <p>作者: 康凯森</p>
            <p>日期: 2016-12-03</p>
            <p>分类: <a href="../tag/笔记.html" target="_blank" >笔记</a></p>
            <hr/>
            <!-- toc -->
<ul>
<li><a href="#1-易读的变量命名">1 易读的变量命名</a></li>
<li><a href="#2-易读的代码布局">2 易读的代码布局</a></li>
<li><a href="#3-易读的注释">3 易读的注释</a></li>
<li><a href="#4-易读的控制流">4 易读的控制流</a></li>
<li><a href="#5-易读的表达式">5 易读的表达式</a></li>
<li><a href="#6-易读的变量使用">6 易读的变量使用</a></li>
<li><a href="#7-抽取不相关的子问题">7 抽取不相关的子问题</a></li>
<li><a href="#8-单一原则一次只做好一件事">8 单一原则：一次只做好一件事</a></li>
<li><a href="#9-用自然语言将想法变成代码">9 用自然语言将想法变成代码</a></li>
<li><a href="#10-少写代码">10 少写代码</a></li>
<li><a href="#11-易读的测试">11 易读的测试</a></li>
<li><a href="#12-参考资料">12 参考资料</a></li>
</ul>
<!-- toc stop -->
<p><strong>提升编程水平最有效的方法就是反反复复地修改和推敲代码。</strong></p>
<p><strong>写出的代码能让人快速理解、轻松维护、容易扩展的程序员才是专业的程序员。</strong></p>
<p><strong>代码的写法应当使别人理解它所需的时间最小化。</strong></p>
<p>如果有人真的完全理解了你的代码，他就应该能改动它、找出缺陷并且明白它是如何与你代码的其他部分交互的。</p>
<h3 id="1-易读的变量命名">1 易读的变量命名</h3>
<ul>
<li>把信息装进变量名中，为名字附带更多信息</li>
<li>使用专业，信息含量更多的词</li>
<li>使用更有表现力的词，英语中同义词很多，要准确使用</li>
<li>避免空洞，泛泛的命名：<code>tmp</code>，<code>foo</code>，命名应当描述变量的目的或者它所承载的值</li>
<li><code>tmp</code>适用于短期存在且临时性的变量</li>
<li>用具体的名称代替抽象的名称</li>
<li>如果你的变量是一个度量的话（如时间长度或者字节数），那么最好把名字带上它的单位。</li>
<li>在小的作用域里可以使用短的名字</li>
<li>利用名字的格式来传递含义，参考团队的编码规范</li>
<li><strong>确保变量的命名不被误解</strong></li>
<li>推荐用min和max来表示（包含）极限</li>
<li>推荐用first和last来表示包含的范围</li>
<li>推荐用begin和end来表示包含/排除范围</li>
</ul>
<h3 id="2-易读的代码布局">2 易读的代码布局</h3>
<ul>
<li>使用一致的布局。</li>
<li>用方法来整理不规则的东西。</li>
<li>让相似的代码看上去相似。</li>
<li>把相关的代码行分组，形成代码块。</li>
<li>选一个有意义的顺序，始终一致地使用它。</li>
<li>一致的风格比“正确”的风格更重要。</li>
</ul>
<h3 id="3-易读的注释">3 易读的注释</h3>
<ul>
<li><strong>注释的目的是尽量帮助读者了解得和作者一样多</strong>。</li>
<li>不要为那些从代码本身就能快速推断的事实写注释。</li>
<li>不要给不好的名字加注释——应该把名字改好。</li>
<li><strong>用注释来记录你对代码有价值的见解</strong>。</li>
<li>为代码中的瑕疵写注释：TODO，FIXME等。</li>
<li>把代码将来应该如何改动的想法用注释记录下来。</li>
<li>给常量加注释。</li>
<li>站在读者的角度用注释解释what? why?</li>
<li>用注释公开可能的陷阱。</li>
<li><strong>“全局观”注释</strong>：类之间如何交互，数据如何在整个系统中流动，以及入口点在哪里。</li>
<li>总结性注释。</li>
<li><strong>可以做任何能帮助读者更容易理解代码的事</strong>。</li>
<li>注释要言简意赅。</li>
<li>注释应该紧凑。</li>
<li>避免使用不明确的代词。</li>
<li>润色粗糙的句子。</li>
<li>精确地描述函数的行为。</li>
<li>用输入/输出例子来说明特别的情况。</li>
<li>声明代码的意图。</li>
<li>采用信息含量高的词，用住专业的词来描述普遍的问题或解决方案。</li>
</ul>
<p>如何养成写注释的习惯</p>
<blockquote>
<p>1.不管你心里想什么，先把它写下来。</p>
<p>2.读一下这段注释，看看有没有什么地方可以改进。</p>
<p>3.不断改进。</p>
</blockquote>
<h3 id="4-易读的控制流">4 易读的控制流</h3>
<p>把条件、循环以及其他对控制流的改变做得越“自然”越好。运用一种方式使读者不用停下来重读你的代码。</p>
<p><strong>相对于追求最小化代码行数，一个更好的度量方法是最小化人们理解它所需的时间。</strong></p>
<p><strong>当你对代码做改动时，从全新的角度审视它，把它作为一个整体来看待。</strong></p>
<ul>
<li>条件语句中参数的顺序</li>
<li>先处理掉简单的情况；先处理有趣的或者是可疑的情况。</li>
<li>避免do/while循环。</li>
<li>最小化嵌套。</li>
</ul>
<h3 id="5-易读的表达式">5 易读的表达式</h3>
<p><strong>把你的超长表达式拆分成更容易理解的小块</strong>。</p>
<p><strong>要小心“智能”的小代码段——它们往往在以后会让别人读起来感到困惑。</strong></p>
<ul>
<li>拆分表达式最简单的方法就是引入一个额外的变量。</li>
<li>不要滥用短路逻辑。</li>
<li>简化复杂的逻辑。</li>
<li>拆分巨大的表达式。</li>
</ul>
<h3 id="6-易读的变量使用">6 易读的变量使用</h3>
<ul>
<li><strong>减少变量</strong>。变量越多，就越难全部跟踪它们的动向。</li>
<li><strong>缩小变量的作用域</strong>。 变量的作用域越大，就需要跟踪它的动向越久。</li>
<li><strong>避免频繁改版变量</strong>。 变量改变得越频繁，就越难以跟踪它的当前值。</li>
<li>不要使用没有价值的临时变量。</li>
<li>减少中间结果。</li>
<li>减少控制流变量。</li>
<li>把变量的定义移到对它的使用之前。</li>
<li><strong>只写一次的变量更好</strong>。那些只设置一次值的变量（或者const、final、常量）使得代码更容易理解。</li>
</ul>
<h3 id="7-抽取不相关的子问题">7 抽取不相关的子问题</h3>
<p><strong>所谓工程学就是关于把大问题拆分成小问题再把这些问题的解决方案放回一起。</strong></p>
<p>积极地发现并抽取出不相关的子逻辑：</p>
<blockquote>
<p>1.看看某个函数或代码块，问问你自己：这段代码高层次的目标是什么？</p>
<p>2.对于每一行代码，问一下：它是直接为了目标而工作吗？这段代码高层次的目标是什么呢？</p>
<p>3.如果足够的行数在解决不相关的子问题，抽取代码到独立的函数中。</p>
</blockquote>
<ul>
<li>抽取纯工具的代码。</li>
<li>抽取多用途的代码。</li>
<li>抽取较通用的代码。</li>
<li>简化已有的接口。</li>
<li>按需重塑接口。</li>
</ul>
<h3 id="8-单一原则：一次只做好一件事">8 单一原则：一次只做好一件事</h3>
<h3 id="9-用自然语言将想法变成代码">9 用自然语言将想法变成代码</h3>
<p><strong>如果你不能把一件事解释给你祖母听的话说明你还没有真正理解它。</strong>
                                                阿尔伯特·爱因斯坦</p>
<blockquote>
<p>1.像对着一个同事一样用自然语言描述代码要做什么。</p>
<p>2.注意描述中所用的关键词和短语。</p>
<p>3.写出与描述所匹配的代码。</p>
</blockquote>
<p><strong>如果你不能把问题说明白或者用词语来做设计，估计是缺少了什么东西或者什么东西缺少定义。把一个问题（或想法）变成语言真的可以让它更具体。</strong></p>
<h3 id="10-少写代码">10 少写代码</h3>
<blockquote>
<p>知道什么时候不写代码可能对于一个程序员来讲是他所要学习的最重要的技巧。</p>
<p>你所写的每一行代码都是要测试和维护的。</p>
<p>通过重用库或者减少功能，你可以节省时间并且让你的代码库保持精简节约。</p>
</blockquote>
<p><strong>最好读的代码就是没有代码。</strong></p>
<ul>
<li>明确需求并尽可能减少需求。</li>
<li>删除没用的代码。</li>
<li>熟悉API和经典的第三方库。</li>
</ul>
<h3 id="11-易读的测试">11 易读的测试</h3>
<p><strong>大多数测试的基本内容都能精练成“对于这样的输入/情形，期望有这样的行为/输出”。并且很多时候这个目的可以用一行代码来表达。</strong></p>
<ul>
<li>让错误消息具有可读性。</li>
<li>选择好的测试输入。好的输入应该能彻底地测试代码，但是它们也应该很简单易读。</li>
<li>又简单又能完成工作的测试值更好。</li>
<li>为测试函数命名。</li>
<li>写出易于测试的代码：避免使用全局变量；避免写对外部组件有大量依赖的代码；避免代码有不确定的行为。</li>
</ul>
<h3 id="12-参考资料">12 参考资料</h3>
<p>本文是《编写可读代码的艺术》的笔记。</p>

            <hr/>
            <div style="padding: 0; margin: 10px auto; width: 90%; text-align: center">
                <button id="rewardButton" , disable="enable" ,
                        onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}"
                        ,
                        style="cursor: pointer; border: 0; outline: 0; border-radius: 100%; padding: 0; margin: 0; letter-spacing: normal; text-transform: none; text-indent: 0px; text-shadow: none">
                    <span onmouseover="this.style.color='rgb(236,96,0)';this.style.background='rgb(204,204,204)'"
                          onMouseOut="this.style.color='#fff';this.style.background='rgb(236,96,0)'"
                          style="display: inline-block; width: 60px; height: 60px; border-radius: 100%; line-height: 70px; color: #fff; font: 400 36px 'Palatino Linotype'; background: rgb(236,96,0)">赏</span>
                </button>
                <div id="QR" style="display: none;">
                    <div id="alipay" style="display: inline-block">
                        <img id="alipay_qr" src="../images/zhifu.jpg" alt="康凯森 支付"
                             style="width: 200px; max-width: 100%; display: inline-block"/>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-md-1"></div>
    </div>
</div>

<div class="row" style="padding-top: 60px">
    <div class="container center-block">
        <div class="col-md-1"></div>
        <div class="col-md-10 col-sm-12">
            <div class="ds-thread"
                 data-thread-key=5871fb36d2f092c392ca4d63
                 data-title=如何编写易读的代码
                 data-url=coding-style>
            </div>
        </div>
        <div class="col-md-1"></div>
    </div>
</div>

<div class="footer">
    <a href="https://www.bcmeng.com/" target="_blank"  rel="nofollow">康凯森</a>
</div>

<script src="../js/code.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="../js/jquery.min.js"></script>
<script src="../js/bootstrap.js"></script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?1d198a377ef466190881d1c021155925";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

</body>
</html>